package com.yuanshuai.weixin.db.dao.impl;

import java.util.List;

import org.hibernate.Query;
import org.hibernate.Session;
import org.hibernate.Transaction;

import com.yuanshuai.weixin.db.HibernateSessionFactory;
import com.yuanshuai.weixin.db.dao.IUserDao;

public class UserDaoImpl extends BaseDaoImpl implements IUserDao {

	@Override
	public Object findByOpenId(String openId) {
		Session session = HibernateSessionFactory.getSession();
		Transaction trans = session.beginTransaction();
		
		String hql = "from User u where u.openId = '" + openId + "'";
		Query query = session.createQuery(hql);

		List<?> list = query.list();
		trans.commit();
		if (list.size() > 0) {
			return list.get(0);
		} else {
			return null;
		}
	}

}
